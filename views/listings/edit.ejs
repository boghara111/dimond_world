<% layout("/layouts/boilerplate") -%>

<body class="flex">
    <form method="POST" action="/listings/<%= listing._id %>?_method=PUT">
        <table>
            <thead>
                <tr class="fullborder">
                    <td colspan="6">
                        <button type="submit">Update</button>
                        <!-- Attach onclick to clear the values of all inputs with the specified class -->
                        <button type="button" onclick="clearInputsByClass()">Clear</button>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        No<input  name="listing[no]" value="<%= listing.no %>" type="number" required>
                    </td>
                    <td colspan="2">
                        Bank<input  name="listing[bank]" value="<%= listing.bank %>" type="number" required>
                    </td>
                    <td colspan="2">
                        Name<input  name="listing[name]" value="<%= listing.name %>" type="text" required>
                    </td>
                </tr>
                <tr>
                    <th><input type="text" value="Day" readonly></th>
                    <th><input type="text" value="A" readonly></th>
                    <th><input type="text" value="B" readonly></th>
                    <th><input type="text" value="C" readonly></th>
                    <th><input type="text" value="D" readonly></th>
                    <th><input type="text" value="E" readonly></th>
                </tr>
            </thead>
            <tbody>
                <% for (let i = 1; i <= 33; i++) { %>
                    <tr>
                        <td><input type="number" value="<%= i %>" readonly></td>
                        <td><input class="clearable" type="number" name="listing[A<%= i %>]" value="<%= listing[`A${i}`] %>"></td>
                        <td><input class="clearable" type="number" name="listing[B<%= i %>]" value="<%= listing[`B${i}`] %>"></td>
                        <td><input class="clearable" type="number" name="listing[C<%= i %>]" value="<%= listing[`C${i}`] %>"></td>
                        <td><input class="clearable" type="number" name="listing[D<%= i %>]" value="<%= listing[`D${i}`] %>"></td>
                        <td><input class="clearable" type="number" name="listing[E<%= i %>]" value="<%= listing[`E${i}`] %>"></td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </form>
    <script>
        function clearInputsByClass() {
            const inputs = document.querySelectorAll('.clearable');
            inputs.forEach(input => input.value = '');
        }
    </script>
    <script src="/listing_price.js"></script>
</body>
